<html>
	<head>
		<meta charset="utf-8"/>
		<script src="wasm_exec.js"></script>
		<script>
			const go = new Go();
			WebAssembly.instantiateStreaming(fetch("search.wasm"), go.importObject).then((result) => {
				go.run(result.instance);
			});
		</script>
	</head>
	<body>
	<input id="ltd-search">
	<div id="ltd-results"></div>
	<script>
	function search() {
		console.log('searching')
		LongTailedDuck('federalist', this.value)
			.then(res => res.json())
			.then(json => {
				console.log(json)
				const results = document.querySelector('#ltd-results')
				let details = ''
				json.forEach(result => {
					details += `🔍 Appears in ${result.document.title} ${result.positions.length} times<br>`
				})
				results.innerHTML = details
			})
	}
	document.querySelector('#ltd-search').onkeyup = search
	</script>
	</body>
</html>