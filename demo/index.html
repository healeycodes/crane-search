<html>
	<head>
		<meta charset="utf-8"/>
		<script src="wasm_exec.js"></script>
		<script>
			const go = new Go();
			WebAssembly.instantiateStreaming(fetch("search.wasm"), go.importObject).then((result) => {
				go.run(result.instance);
			});
		</script>
	</head>
	<body>
	<input id="crane-search" placeholder="Search!">
	<div id="crane-results"></div>
	<script>
	function search() {
		Crane('federalist.crane', this.value)
			.then(res => res.json())
			.then(json => {
				console.log(json)
				const results = document.querySelector('#crane-results')
				let details = ''
				json.forEach(result => {
					details += `🔍 Appears in ${result.title}<br>`
				})
				results.innerHTML = details
			})
	}
	document.querySelector('#crane-search').onkeyup = search
	</script>
	</body>
</html>
